<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ title || 'Admin Panel - CMS' }}</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  
  @if(settings.favicon_url)
    <link rel="icon" type="image/x-icon" href="{{ settings.favicon_url }}">
  @end

  <script src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/6.8.2/tinymce.min.js" referrerpolicy="origin"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
  @vite(['resources/css/app.css', 'resources/js/app.js'])
</head>
<body class="bg-gray-50 h-screen overflow-hidden font-sans text-gray-800 antialiased selection:bg-blue-500 selection:text-white">
  <div x-data="{ sidebarOpen: false }" class="flex h-full">
    <!-- Mobile Sidebar Overlay -->
    <div x-show="sidebarOpen" @click="sidebarOpen = false" x-transition:enter="transition-opacity ease-linear duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition-opacity ease-linear duration-300" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 bg-gray-900/80 z-40 lg:hidden" style="display: none;"></div>

    <!-- Sidebar -->
    <div :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full'" class="fixed inset-y-0 left-0 z-50 w-64 bg-gray-900 text-white transition-transform duration-300 ease-in-out lg:static lg:translate-x-0" style="background-color: {{ settings.admin_theme_color || '#1F2937' }}">
       @include('components/admin/sidebar')
    </div>

    <!-- Main Wrapper -->
    <div class="flex flex-col flex-1 w-0 overflow-hidden">
      <!-- Top header -->

      <!-- Navbar -->
      @include('components/admin/navbar')

      <!-- Content Area -->
      <main class="flex-1 overflow-y-auto focus:outline-none scroll-smooth">
        <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
          {{{ await $slots.main() }}}
        </div>
      </main>
    </div>
  </div>
    <!-- Alpine.js for interactivity -->
  <script src="//unpkg.com/alpinejs" defer></script>
  
  @include('components/admin/alert')
  
  <script>
    // Universal Delete Confirmation
    document.addEventListener('DOMContentLoaded', () => {
       const deleteForms = document.querySelectorAll('form[onsubmit*="return confirm"]');
       deleteForms.forEach(form => {
           form.removeAttribute('onsubmit'); // Remove native confirm
           form.addEventListener('submit', (e) => {
               e.preventDefault();
               Swal.fire({
                   title: 'Apakah Anda Yakin?',
                   text: "Data yang dihapus tidak dapat dikembalikan!",
                   icon: 'warning',
                   showCancelButton: true,
                   confirmButtonColor: '#EF4444',
                   cancelButtonColor: '#9CA3AF',
                   confirmButtonText: 'Ya, Hapus!',
                   cancelButtonText: 'Batal',
                   reverseButtons: true, // Modern UX: Safe action on right (or left depending on OS, but specific preference here)
                   backdrop: `rgba(17, 24, 39, 0.6) left top no-repeat`,
                   customClass: {
                      popup: 'rounded-2xl shadow-xl',
                      confirmButton: 'px-6 py-2.5 rounded-lg font-bold',
                      cancelButton: 'px-6 py-2.5 rounded-lg font-bold'
                   }
               }).then((result) => {
                   if (result.isConfirmed) {
                       form.submit();
                   }
               });
           });
       });
    });
  </script>
</body>
</html>
